{% load static %}

<!DOCTYPE html>
<html lang="en" class="no-js">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>CS - Fulfillment</title>
    <link href="{% static 'images/favicon.ico' %}" rel="shortcut icon" type="image/png">
    <link href="{% static 'css/font.css' %}" rel="stylesheet">
    <link href="{% static 'css/fontawesome.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/mdb.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/jquery.dataTables.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/dataTables.bootstrap4.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap-datepicker3.css' %}" rel="stylesheet" />
    <link href="{% static 'css/select2.min.css' %}" rel="stylesheet" />
    <link href="{% static 'css/style.css' %}" rel="stylesheet">


</head>

<body style="font-family:Montserrat; width: 100%;margin: 0;">
    {% block content %}
    {% endblock %}

    <script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/jquery-ui.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/popper.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/mdb.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/modernizr.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/bootstrap.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/dataTables.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/bootstrap-datepicker.min.js' %}"></script>
    <script>
        $(document).ready(function () {
            var date_input = $('input[name="switch_date"]'); //our date input has the name "date"
            var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
            var options = {
                format: 'mm/dd/yyyy',
                container: container,
                orientation: "bottom right",
                todayHighlight: true,
                autoclose: true,
            };
            date_input.datepicker(options);
        })
    </script>
    <script>
        $(document).ready(function () {
            var date_input = $('input[name="emailback_date"]'); //our date input has the name "date"
            var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
            var options = {
                format: 'mm/dd/yyyy',
                container: container,
                orientation: "bottom right",
                todayHighlight: true,
                autoclose: true,
            };
            date_input.datepicker(options);
        })
    </script>

    <script>
        $(document).ready(function () {
            var date_input = $('input[name="callback_date"]'); //our date input has the name "date"
            var container = $('.bootstrap-iso form').length > 0 ? $('.bootstrap-iso form').parent() : "body";
            var options = {
                format: 'mm/dd/yyyy',
                container: container,
                orientation: "bottom right",
                todayHighlight: true,
                autoclose: true,
            };
            date_input.datepicker(options);
        })
    </script>

    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#example4 tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#example4').DataTable({
                "order": [
                    [1, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                initComplete: function () {
                    // Apply the search
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change clear', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });

        });
    </script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#example6 tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#example6').DataTable({
                "order": [
                    [0, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                initComplete: function () {
                    // Apply the search
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change clear', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });

        });
    </script>

    <script>
        $(document).ready(function () {
            $("#id_institution_name_db").autocomplete({
                source: "/inst/search/",
                minLength: 3,
                position: {
                    offset: '20 4' // Shift 20px to the left, 4px down.
                },
                open: function () {
                    setTimeout(function () {
                        $('.ui-autocomplete').css('z-index', 99);
                        $('.ui-autocomplete').css('right', 0);
                        $(".ui-autocomplete:visible").css({
                            top: "+=5",
                            left: "-=10"
                        });
                    }, 0);
                },
            });
        });
    </script>


    <script>
        $(document).ready(function () {
            $("#id_institution").autocomplete({
                source: "/inst/search/",
                minLength: 3,
                position: {
                    offset: '20 4' // Shift 20px to the left, 4px down.
                },
                open: function () {
                    setTimeout(function () {
                        $('.ui-autocomplete').css('z-index', 99);
                        $('.ui-autocomplete').css('right', 0);
                        $(".ui-autocomplete:visible").css({
                            top: "+=5",
                            left: "-=10"
                        });
                    }, 0);
                },
            });
        });
    </script>

    <script>
        var valu;
        $(document).ready(function () {
            function checkMediaQuery() {
                // If the inner width of the window is greater then 768p
                if (window.innerWidth < 992) {
                    // Then log this message to the console
                    valu = "-=10";
                }
                else {
                    valu = "-=90";
                }
                console.log(valu);
                // return valu;
            }
            checkMediaQuery();
            // Add a listener for when the window resizes
            window.addEventListener('resize', checkMediaQuery);
            $("#txtSearch").autocomplete({
                source: "/ajax_calls/search/",
                minLength: 2,
                position: {
                    offset: '20 4' // Shift 20px to the left, 4px down.
                },
                open: function () {
                    setTimeout(function () {
                        $('.ui-autocomplete').css('z-index', 99);
                        $('.ui-autocomplete').css('right', 0);
                        $(".ui-autocomplete:visible").css({
                            top: "+=5",
                            left: valu
                        });
                    }, 0);
                },
                select: function (event, ui) {
                    GetRedirectPage(ui.item.label, ui.item.id);
                }
            });
        });

        function GetRedirectPage(label, slug) {
            window.location.href = "/unknowns/" + slug;
        }
    </script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#example7 tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#example7').DataTable({
                "order": [
                    [0, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                initComplete: function () {
                    // Apply the search
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change clear', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });

        });
    </script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#example8 tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#example8').DataTable({
                "order": [
                    [0, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                initComplete: function () {
                    // Apply the search
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change clear', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });

        });
    </script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#exampleqw tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#exampleqw').DataTable({
                "order": [
                    [3, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                initComplete: function () {
                    // Apply the search
                    this.api().columns().every(function () {
                        var that = this;

                        $('input', this.footer()).on('keyup change clear', function () {
                            if (that.search() !== this.value) {
                                that
                                    .search(this.value)
                                    .draw();
                            }
                        });
                    });
                }
            });

        });
    </script>
    <script>
        $(document).ready(function () {
            // Setup - add a text input to each footer cell
            $('#example90 tfoot th').each(function () {
                var title = $(this).text();
                $(this).html('<input type="text" placeholder="Search ' + title + '" />');
            });

            // DataTable
            var table = $('#example90').DataTable({
                "order": [
                    [0, "desc"]
                ],
                lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, "All"]],
                "pageLength": 25,
                oSearch: { "bRegex": true }//, "sSearch": "^(?=.*?(10|99)).*?"
                // initComplete: function () {
                //     // Apply the search
                //     this.api().columns().every(function () {
                //         var that = this;

                //         $('input', this.footer()).on('keyup change clear', function () {
                //             if (that.search() !== this.value) {
                //                 that
                //                     .search(this.value)
                //                     .draw();
                //             }
                //         });
                //     });
                // }
            });
            // var input = $(".dataTables_filter input");
            // input.unbind('keyup search input').bind('keyup',
            //     function (e) {
            //         if (input.val().length > 0) {
            //             var keywords = input.val().trim().split(' '), filter = '';
            //             for (var i = 0; i < keywords.length; i++) {
            //                 filter = (filter !== '') ? filter + '|' + keywords[i] : keywords[i];
            //             }
            //             dataTable.fnFilter(filter, null, true, false, true, true);
            //             //                                ^ Treat as regular expression or not
            //         } else if (input.val().length == 0) {
            //             dataTable.fnFilter(" ", null, true, false, true, true);
            //         }
            //     });

        });
    </script>
    <script>
        $(".custom-select").each(function () {
            var classes = $(this).attr("class"),
                id = $(this).attr("id"),
                name = $(this).attr("name");
            var template = '<div class="' + classes + '">';
            template += '<span class="custom-select-trigger">' + $(this).attr("placeholder") + '</span>';
            template += '<div class="custom-options">';
            $(this).find("option").each(function () {
                template += '<span class="custom-option ' + $(this).attr("class") + '" data-value="' + $(this).attr("value") + '">' + $(this).html() + '</span>';
            });
            template += '</div></div>';

            $(this).wrap('<div class="custom-select-wrapper"></div>');
            $(this).hide();
            $(this).after(template);
        });
        $(".custom-option:first-of-type").hover(function () {
            $(this).parents(".custom-options").addClass("option-hover");
        }, function () {
            $(this).parents(".custom-options").removeClass("option-hover");
        });
        $(".custom-select-trigger").on("click", function () {
            $('html').one('click', function () {
                $(".custom-select").removeClass("opened");
            });
            $(this).parents(".custom-select").toggleClass("opened");
            event.stopPropagation();
        });
        $(".custom-option").on("click", function () {
            $(this).parents(".custom-select-wrapper").find("select").val($(this).data("value"));
            $(this).parents(".custom-options").find(".custom-option").removeClass("selection");
            $(this).addClass("selection");
            $(this).parents(".custom-select").removeClass("opened");
            $(this).parents(".custom-select").find(".custom-select-trigger").text($(this).text());
        });
    </script>
    <script>
        var $select = $('select');
        $select.each(function () {
            $(this).addClass($(this).children(':selected').val());
        }).on('change', function (ev) {
            $(this).attr('class', '').addClass($(this).children(':selected').val());
        });
    </script>
    <script>
        $(document).ready(function () {
            $(".btnSelect").click(function (e) {
                var currentRow = $(this).closest("tr");
                // console.log(currentRow);
                var col1 = currentRow.find("td:eq(0)").html();
                // e.preventDefault();
                $.ajax({
                    type: "post",
                    url: "/process/pending/" + col1,
                    // data: data,
                    success: function (result) {
                        window.location.href = "/process/pending/" + col1;
                    }
                });
            });
        });
    </script>
    <script>
        $(function () {
            $('.md-trigger').on('click', function () {
                $('.md-modal').addClass('md-show');
            });
            $('.md-close').on('click', function () {
                $('.md-modal').removeClass('md-show');
            });
        });
    </script>
</body>

</html>